/*! myfirst_grunt-1.0.js 2017-03-13 */
angular.module("cart",[]).factory("cart",function(){var a=[];return{addProduct:function(b,c,d){for(var e=!1,f=0;f<a.length;f++)if(a[f].id==b){a[f].count++,e=!0;break}e||a.push({count:1,id:b,price:d,name:c}),console.log(a)},removeProduct:function(b){for(var c=0;c<a.length;c++)if(a[c].id==b){a.splice(c,1);break}},getProducts:function(){return a}}}).directive("cartSummary",function(a){return{restrict:"E",templateUrl:"components/cart/cartSummary.html",controller:function(b){var c=a.getProducts();b.total=function(){for(var a=0,b=0;b<c.length;b++)a+=c[b].price*c[b].count;return a},b.itemCount=function(){for(var a=0,b=0;b<c.length;b++)a+=c[b].count;return a}}}}),angular.module("sportsStoreAdmin",["ngRoute","ngResource"]).constant("authUrl","http://localhost:5500/users/login").constant("ordersUrl","http://localhost:5500/orders").config(function(a){a.when("/login",{templateUrl:"views/adminLogin.html"}),a.when("/main",{templateUrl:"views/adminMain.html"}),a.otherwise({redirectTo:"/login"})}).controller("authCtrl",function(a,b,c,d){a.authenticate=function(e,f){b.post(d,{username:e,password:f},{withCredentials:!0}).success(function(a){c.path("/main")}).error(function(b){a.authenticationError=b})}}).controller("mainCtrl",function(a){a.screens=["Products","Orders"],a.current=a.screens[0],a.setScreen=function(b){a.current=a.screens[b]},a.getScreen=function(){return"Products"===a.current?"views/adminProducts.html":"views/adminOrders.html"}}).controller("ordersCtrl",function(a,b,c){b.get(c,{withCredentials:!0}).success(function(b){a.orders=b}).error(function(b){a.error=b}),a.selectedOrder,a.selectOrder=function(b){a.selectedOrder=b},a.calcTotal=function(a){for(var b=0,c=0;c<a.products.length;c++)b+=a.products[c].count+a.products[c].price;return b}}),angular.module("sportsStoreAdmin").constant("productUrl","http://localhost:5500/products/").config(function(a){a.defaults.withCredentials=!0}).controller("productCtrl",function(a,b,c){a.productsResource=b(c+":id",{id:"@id"}),a.listProducts=function(){a.products=a.productsResource.query()},a.deleteProduct=function(b){b.$delete().then(function(){a.products.splice(a.products.indexOf(b),1)})},a.createProduct=function(b){new a.productsResource(b).$save().then(function(b){a.products.push(b),a.editedProduct=null})},a.updateProduct=function(b){b.$save(),a.editedProduct=null},a.startEdit=function(b){a.editedProduct=b},a.cancelEdit=function(){a.editedProduct=null},a.listProducts()}),angular.module("productListCtrl",[]).constant("productListActiveClass","btn-primary").constant("productListPageCount",3).controller("productListCtrl",["$scope","$filter","productListActiveClass","productListPageCount","cart",function(a,b,c,d,e){var f=null;a.pageSize=d,a.selectedPage=1,a.selectCategory=function(b){f=b,a.selectedPage=1},a.categoryFilterFn=function(a){return null==f||a.category==f},a.getCategoryClass=function(a){return f==a?c:""},a.selectPage=function(b){a.selectedPage=b},a.getPageClass=function(b){return a.selectedPage==b?c:""},a.addProductToCart=function(a){e.addProduct(a.id,a.name,a.price)}}]),angular.module("sportsStore",["customFilters","productListCtrl","cart","ngRoute"]).constant("dataUrl","http://localhost:5500/products").constant("orderUrl","http://localhost:5500/orders").config(function(a){a.when("/checkout",{templateUrl:"views/checkoutSummary.html"}),a.when("/products",{templateUrl:"views/productList.html"}),a.when("/placeorder",{templateUrl:"views/placeorder.html"}),a.when("/complete",{templateUrl:"views/thankYou.html"}),a.otherwise({templateUrl:"views/productList.html"})}).controller("sportsStoreCtrl",["$scope","$http","$location","dataUrl","orderUrl","cart",function(a,b,c,d,e,f){a.data={},b.get(d).success(function(b){a.data.products=b}).error(function(b){a.data.error=b}),a.sendOrder=function(d){var g=angular.copy(d);g.products=f.getProducts(),b.post(e,g).success(function(b){a.data.orderId=b.id,f.getProducts().length=0}).error(function(b){a.data.orderError=b}).finally(function(){c.path("/complete")})}}]).controller("cartSummaryController",["$scope","cart",function(a,b){a.cartData=b.getProducts(),a.total=function(){for(var b=0,c=0;c<a.cartData.length;c++)b+=a.cartData[c].price*a.cartData[c].count;return b},a.remove=function(a){b.removeProduct(a)}}]),angular.module("customFilters",[]).filter("unique",function(){return function(a,b){if(angular.isArray(a)&&angular.isString(b)){for(var c=[],d={},e=0;e<a.length;e++){var f=a[e][b];angular.isUndefined(d[f])&&(d[f]=!0,c.push(f))}return c}return a}}).filter("range",["$filter",function(a){return function(b,c,d){if(angular.isArray(b)&&angular.isNumber(c)&&angular.isNumber(d)){var e=(c-1)*d;return b.length<e?[]:a("limitTo")(b.splice(e),d)}return b}}]).filter("pageCount",function(){return function(a,b){if(angular.isArray(a)){for(var c=[],d=0;d<Math.ceil(a.length/b);d++)c.push(d);return c}return a}});